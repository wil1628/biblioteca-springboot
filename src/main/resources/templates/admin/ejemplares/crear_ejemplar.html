<!-- fragmento del encabezado -->
<div th:replace="fragments/header :: header"></div>

<!-- Barra de navegaci√≥n del dashboard -->
<nav class="bg-gray-100 border-b border-gray-300 mb-6">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <div class="flex space-x-4">
                <a href="/admin/dashboard" class="text-gray-700 hover:text-blue-600 font-medium">Dashboard</a>
                <a href="/admin/usuarios/usuarios" class="text-gray-700 hover:text-blue-600 font-medium">üë• Usuarios</a>
                <a href="/admin/libros/libros" class="text-gray-700 hover:text-blue-600 font-medium">üìö Libros</a>
                <a href="/admin/categorias/categorias" class="text-gray-700 hover:text-blue-600 font-medium">üè∑Ô∏è Categor√≠as</a>
                <a href="/admin/autores/autores" class="text-gray-700 hover:text-blue-600 font-medium">‚úçÔ∏è Autores</a>
                <a href="/admin/ejemplares/ejemplares" class="text-gray-700 hover:text-blue-600 font-medium">üìñ Ejemplares</a>    
                <a href="/admin/prestamos/prestamos" class="text-gray-700 hover:text-blue-600 font-medium">üìÑ Pr√©stamos</a>            
            </div>
            <div>
                <a href="/" class="text-gray-500 hover:text-red-500 font-medium">‚Üê Volver al sitio</a>
            </div>
        </div>
    </div>
</nav>

<body class="bg-gray-100">

    <main class="max-w-xl mx-auto py-12 px-6">
        <h2 class="text-3xl font-bold text-center mb-8">Nuevo Ejemplar</h2>

        <!-- Mensaje global de error -->
        <div th:if="${error}" class="bg-red-100 text-red-700 px-4 py-2 rounded mb-4">
            <p th:text="${error}"></p>
        </div>

        <form th:action="@{/admin/ejemplares/ejemplares/guardar}" th:object="${ejemplar}" method="post"
            class="bg-white shadow-md rounded-lg p-6 space-y-6 text-gray-800">

            <!-- C√≥digo del ejemplar -->
            <div>
                <label class="block text-black font-semibold mb-1">C√≥digo del Ejemplar</label>
                <input type="text" th:field="*{codigoEjemplar}" required
                    class="w-full border rounded px-4 py-2 focus:ring-2 focus:ring-indigo-500" />
                <div th:if="${#fields.hasErrors('codigoEjemplar')}" class="text-red-600 text-sm mt-1">
                    <p th:errors="*{codigoEjemplar}"></p>
                </div>
            </div>

            <!-- Selecci√≥n de libro -->
            <div>
                <label class="block text-black font-semibold mb-1">Libro</label>
                <select th:field="*{libro}" required
                    class="w-full border rounded px-4 py-2 focus:ring-2 focus:ring-indigo-500">
                    <option value="" disabled th:selected="${ejemplar.libro == null}">Seleccione un libro</option>
                    <option th:each="libro : ${libros}" th:value="${libro.id}" th:text="${libro.titulo}"></option>
                </select>
                <div th:if="${#fields.hasErrors('libro')}" class="text-red-600 text-sm mt-1">
                    <p th:errors="*{libro}"></p>
                </div>
            </div>

            <!-- Estado del ejemplar -->
            <div>
                <label class="block text-black font-semibold mb-1">Estado</label>
                <select th:field="*{estado}" class="w-full border rounded px-4 py-2 focus:ring-2 focus:ring-indigo-500">
                    <option th:value="DISPONIBLE">Disponible</option>
                    <option th:value="PRESTADO">Prestado</option>
                    <option th:value="DANADO">Da√±ado</option>
                </select>
                <div th:if="${#fields.hasErrors('estado')}" class="text-red-600 text-sm mt-1">
                    <p th:errors="*{estado}"></p>
                </div>
            </div>

            <!-- Botones -->
            <div class="flex justify-end space-x-4 pt-4">
                <a href="/admin/ejemplares/ejemplares"
                    class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-full">Cancelar</a>
                <button type="submit"
                    class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-full">
                    Guardar
                </button>
            </div>
        </form>
    </main>

</body>

<div th:replace="fragments/footer :: footer"></div>
